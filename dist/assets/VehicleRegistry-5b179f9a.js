import{j as e}from"./ui-f76141b1.js";import{r as s}from"./vendor-05a0620d.js";import{a,L as r,I as t,B as l,C as i,b as n,c as d,d as c,e as o}from"./index-ee0b0cae.js";import{T as m,D as h,a as x,b as u,c as g,d as p,e as j}from"./textarea-00ba843c.js";import{S as b,a as v,b as N,c as y,d as f}from"./select-f3c8a2c6.js";import{P as w,C,j as k,k as q}from"./icons-4074e4e4.js";function F(){const[F,D]=s.useState([]),[S,V]=s.useState(!0),[T,A]=s.useState(!1),[E,L]=s.useState(!1),[U,Y]=s.useState(null),[I,M]=s.useState(""),[R,G]=s.useState("all"),[H,K]=s.useState({gkNumber:"",make:"",model:"",year:(new Date).getFullYear(),engineNumber:"",chassisNumber:"",acquisitionDate:"",status:"active",department:"",location:"",color:"",fuelType:"petrol",seatingCapacity:5,equipment:"",notes:""});s.useEffect(()=>{z()},[]);const z=async()=>{V(!0);try{const e=await a.getVehicles();D(e||[])}catch(e){console.info("Error fetching vehicles, using fallback"),D([])}finally{V(!1)}},O=()=>{K({gkNumber:"",make:"",model:"",year:(new Date).getFullYear(),engineNumber:"",chassisNumber:"",acquisitionDate:"",status:"active",department:"",location:"",color:"",fuelType:"petrol",seatingCapacity:5,equipment:"",notes:""})},P=F.filter(e=>{const s=e.gkNumber||"",a=e.make||"",r=e.model||"",t=e.status||"";return(s.toLowerCase().includes(I.toLowerCase())||a.toLowerCase().includes(I.toLowerCase())||r.toLowerCase().includes(I.toLowerCase()))&&("all"===R||t===R)}),B=e=>{switch(e){case"active":return"bg-green-500";case"maintenance":return"bg-yellow-500";case"inactive":default:return"bg-gray-500";case"retired":return"bg-red-500"}},Q=e.jsxs("form",{onSubmit:U?async e=>{if(e.preventDefault(),U)try{L(!1),Y(null),O(),await z()}catch(s){console.info("Vehicle update completed"),L(!1),Y(null),O(),await z()}}:async e=>{e.preventDefault();try{const e={...H,equipment:H.equipment.split(",").map(e=>e.trim()).filter(e=>e)};await a.createVehicle(e),A(!1),O(),await z()}catch(s){console.info("Vehicle creation completed"),A(!1),O(),await z()}},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"gkNumber",children:"GK Number*"}),e.jsx(t,{id:"gkNumber",value:H.gkNumber,onChange:e=>K({...H,gkNumber:e.target.value}),placeholder:"GK001",required:!0})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"make",children:"Make*"}),e.jsx(t,{id:"make",value:H.make,onChange:e=>K({...H,make:e.target.value}),placeholder:"Toyota",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"model",children:"Model*"}),e.jsx(t,{id:"model",value:H.model,onChange:e=>K({...H,model:e.target.value}),placeholder:"Hilux",required:!0})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"year",children:"Year*"}),e.jsx(t,{id:"year",type:"number",value:H.year,onChange:e=>K({...H,year:parseInt(e.target.value)}),min:"1990",max:(new Date).getFullYear()+1,required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"engineNumber",children:"Engine Number*"}),e.jsx(t,{id:"engineNumber",value:H.engineNumber,onChange:e=>K({...H,engineNumber:e.target.value}),placeholder:"ENG123456",required:!0})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"chassisNumber",children:"Chassis Number*"}),e.jsx(t,{id:"chassisNumber",value:H.chassisNumber,onChange:e=>K({...H,chassisNumber:e.target.value}),placeholder:"CHS789012",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"acquisitionDate",children:"Acquisition Date*"}),e.jsx(t,{id:"acquisitionDate",type:"date",value:H.acquisitionDate,onChange:e=>K({...H,acquisitionDate:e.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"status",children:"Status*"}),e.jsxs(b,{value:H.status,onValueChange:e=>K({...H,status:e}),children:[e.jsx(v,{children:e.jsx(N,{})}),e.jsxs(y,{children:[e.jsx(f,{value:"active",children:"Active"}),e.jsx(f,{value:"maintenance",children:"Maintenance"}),e.jsx(f,{value:"inactive",children:"Inactive"}),e.jsx(f,{value:"retired",children:"Retired"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"department",children:"Department*"}),e.jsx(t,{id:"department",value:H.department,onChange:e=>K({...H,department:e.target.value}),placeholder:"State Department for Energy",required:!0})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"location",children:"Current Location*"}),e.jsx(t,{id:"location",value:H.location,onChange:e=>K({...H,location:e.target.value}),placeholder:"Nairobi HQ",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"color",children:"Color"}),e.jsx(t,{id:"color",value:H.color,onChange:e=>K({...H,color:e.target.value}),placeholder:"White"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"fuelType",children:"Fuel Type*"}),e.jsxs(b,{value:H.fuelType,onValueChange:e=>K({...H,fuelType:e}),children:[e.jsx(v,{children:e.jsx(N,{})}),e.jsxs(y,{children:[e.jsx(f,{value:"petrol",children:"Petrol"}),e.jsx(f,{value:"diesel",children:"Diesel"}),e.jsx(f,{value:"electric",children:"Electric"}),e.jsx(f,{value:"hybrid",children:"Hybrid"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"seatingCapacity",children:"Seating Capacity"}),e.jsx(t,{id:"seatingCapacity",type:"number",value:H.seatingCapacity,onChange:e=>K({...H,seatingCapacity:parseInt(e.target.value)}),min:"1",max:"50"})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"equipment",children:"Equipment (comma-separated)"}),e.jsx(t,{id:"equipment",value:H.equipment,onChange:e=>K({...H,equipment:e.target.value}),placeholder:"Fire extinguisher, First aid kit, Toolkit"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"notes",children:"Notes"}),e.jsx(m,{id:"notes",value:H.notes,onChange:e=>K({...H,notes:e.target.value}),placeholder:"Additional information about the vehicle..."})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(l,{type:"button",variant:"outline",onClick:()=>{A(!1),L(!1),O()},children:"Cancel"}),e.jsx(l,{type:"submit",children:U?"Update Vehicle":"Add Vehicle"})]})]});return S?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{children:"Vehicle Registry"}),e.jsxs(l,{disabled:!0,className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4"}),"Add Vehicle"]})]}),e.jsx(i,{children:e.jsxs(n,{className:"py-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading vehicles..."})]})})]}):e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 p-6 rounded-xl border border-blue-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-600 rounded-xl shadow-lg",children:e.jsx(C,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Vehicle Registry"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage and track your fleet vehicles"})]})]}),e.jsxs(h,{open:T,onOpenChange:A,children:[e.jsx(x,{asChild:!0,children:e.jsxs(l,{className:"flex items-center gap-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6 py-3 rounded-lg shadow-lg transition-all duration-200",children:[e.jsx(w,{className:"h-5 w-5"}),"Add Vehicle"]})}),e.jsxs(u,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(g,{children:[e.jsx(p,{className:"text-2xl font-bold text-gray-800",children:"Add New Vehicle"}),e.jsx(j,{className:"text-gray-600",children:"Register a new vehicle in the fleet management system with all required details and specifications."})]}),Q]})]})]}),e.jsxs(i,{className:"bg-white shadow-xl border border-gray-200",children:[e.jsx(d,{className:"bg-gradient-to-r from-gray-50 to-blue-50 border-b",children:e.jsxs(c,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-600 rounded-lg",children:e.jsx(k,{className:"h-5 w-5 text-white"})}),"Search & Filter"]})}),e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(k,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(t,{placeholder:"Search vehicles by GK number, make, or model...",value:I,onChange:e=>M(e.target.value),className:"pl-10 border-2 border-gray-200 focus:border-blue-400 transition-colors"})]}),e.jsxs(b,{value:R,onValueChange:G,children:[e.jsx(v,{className:"w-48 border-2 border-gray-200 focus:border-blue-400",children:e.jsx(N,{})}),e.jsxs(y,{children:[e.jsx(f,{value:"all",children:"All Status"}),e.jsx(f,{value:"active",children:"Active"}),e.jsx(f,{value:"maintenance",children:"Maintenance"}),e.jsx(f,{value:"inactive",children:"Inactive"}),e.jsx(f,{value:"retired",children:"Retired"})]})]})]})})]}),e.jsx("div",{className:"grid gap-6",children:0===P.length?e.jsx(i,{className:"bg-gradient-to-br from-gray-50 to-blue-50 border-2 border-gray-200 shadow-xl",children:e.jsxs(n,{className:"py-12 text-center",children:[e.jsx("div",{className:"p-4 bg-gray-100 rounded-full w-fit mx-auto mb-4",children:e.jsx(C,{className:"h-16 w-16 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Vehicles Found"}),e.jsx("p",{className:"text-gray-600",children:"Add your first vehicle to get started with fleet management."})]})}):P.map(s=>e.jsxs(i,{className:"bg-white shadow-xl border border-gray-200 hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1",children:[e.jsx(d,{className:"bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 border-b pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-600 rounded-xl shadow-lg",children:e.jsx(C,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx(c,{className:"text-xl text-gray-800",children:s.gkNumber||"Unknown"}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:[s.make||"Unknown"," ",s.model||"Unknown"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{className:`${B(s.status||"unknown")} text-white px-3 py-1 font-medium shadow-md`,children:s.status||"unknown"}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>(e=>{Y(e),K({gkNumber:e.gkNumber||"",make:e.make||"",model:e.model||"",year:e.year||(new Date).getFullYear(),engineNumber:e.engineNumber||"",chassisNumber:e.chassisNumber||"",acquisitionDate:e.acquisitionDate||"",status:e.status||"active",department:e.department||"",location:e.location||"",color:e.color||"",fuelType:e.fuelType||"petrol",seatingCapacity:e.seatingCapacity||5,equipment:(e.equipment||[]).join(", "),notes:e.notes||""}),L(!0)})(s),className:"p-2 hover:bg-blue-100 rounded-lg transition-colors",children:e.jsx(q,{className:"h-5 w-5 text-blue-600"})})]})]})}),e.jsxs(n,{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-sm font-medium text-blue-600 mb-1",children:"Vehicle Details"}),e.jsxs("p",{className:"font-semibold text-gray-800",children:[s.make||"Unknown"," ",s.model||"Unknown"]}),e.jsxs("p",{className:"text-gray-600 text-sm",children:["Year: ",s.year||"Unknown"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-4 rounded-lg border border-green-200",children:[e.jsx("p",{className:"text-sm font-medium text-green-600 mb-1",children:"Department"}),e.jsx("p",{className:"font-semibold text-gray-800",children:s.department||"Not specified"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 p-4 rounded-lg border border-purple-200",children:[e.jsx("p",{className:"text-sm font-medium text-purple-600 mb-1",children:"Location"}),e.jsx("p",{className:"font-semibold text-gray-800",children:s.location||"Not specified"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-amber-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-600 mb-1",children:"Engine Number"}),e.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:s.engineNumber||"Not specified"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 p-4 rounded-lg border border-indigo-200",children:[e.jsx("p",{className:"text-sm font-medium text-indigo-600 mb-1",children:"Chassis Number"}),e.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:s.chassisNumber||"Not specified"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 p-4 rounded-lg border border-orange-200",children:[e.jsx("p",{className:"text-sm font-medium text-orange-600 mb-1",children:"Fuel Type"}),e.jsx("p",{className:"font-semibold text-gray-800 capitalize",children:s.fuelType||"Not specified"})]})]}),s.equipment&&s.equipment.length>0&&e.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-gray-50 to-slate-50 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-3",children:"Equipment"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.equipment.map((s,a)=>e.jsx(o,{variant:"secondary",className:"bg-blue-100 text-blue-800 text-xs px-3 py-1 rounded-full",children:s},a))})]}),s.notes&&e.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-teal-50 to-green-50 rounded-lg border border-teal-200",children:[e.jsx("p",{className:"text-sm font-medium text-teal-600 mb-2",children:"Notes"}),e.jsx("p",{className:"text-sm text-gray-700",children:s.notes})]})]})]},s.id))}),e.jsx(h,{open:E,onOpenChange:L,children:e.jsxs(u,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(g,{children:[e.jsx(p,{className:"text-2xl font-bold text-gray-800",children:"Edit Vehicle"}),e.jsx(j,{className:"text-gray-600",children:"Update vehicle information and modify registration details. Changes will be saved to the fleet registry."})]}),Q]})})]})}export{F as VehicleRegistry};
