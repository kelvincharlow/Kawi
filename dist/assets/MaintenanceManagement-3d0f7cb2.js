import{j as e}from"./ui-f76141b1.js";import{r as s}from"./vendor-05a0620d.js";import{a as r,L as a,I as t,B as l,C as i,b as n,c,d,e as o}from"./index-ee0b0cae.js";import{T as x,D as m,a as h,b as g,c as p,d as u}from"./textarea-00ba843c.js";import{S as j,a as v,b,c as f,d as N}from"./select-f3c8a2c6.js";import{W as y,D as w,P as C,F as S,d as D,s as k,j as R,T as I,C as L,h as M}from"./icons-4074e4e4.js";import{R as T,B as F,C as P,X as $,Y as E,T as V,a as A}from"./BarChart-8c621854.js";function K(){const[K,O]=s.useState([]),[U,q]=s.useState([]),[z,B]=s.useState(!1),[G,W]=s.useState("all"),[H,X]=s.useState("all"),[Y,J]=s.useState(""),[Q,Z]=s.useState("all"),[_,ee]=s.useState({vehicleId:"",maintenanceType:"routine",serviceProvider:"",workDescription:"",partsReplaced:"",cost:0,laborCost:0,partsCost:0,mileage:0,date:"",nextServiceDate:"",nextServiceMileage:0,status:"scheduled",priority:"medium",warrantyInfo:"",notes:""});s.useEffect(()=>{se(),re()},[]),s.useEffect(()=>{_.laborCost&&_.partsCost&&ee(e=>({...e,cost:e.laborCost+e.partsCost}))},[_.laborCost,_.partsCost]);const se=async()=>{try{const e=await r.getMaintenanceRecords();O(e||[])}catch(e){console.error("Error fetching maintenance records:",e)}},re=async()=>{try{const e=await r.getVehicles();q(e||[])}catch(e){console.error("Error fetching vehicles:",e)}},ae=()=>{ee({vehicleId:"",maintenanceType:"routine",serviceProvider:"",workDescription:"",partsReplaced:"",cost:0,laborCost:0,partsCost:0,mileage:0,date:"",nextServiceDate:"",nextServiceMileage:0,status:"scheduled",priority:"medium",warrantyInfo:"",notes:""})},te=e=>U.find(s=>s.id===e),le=()=>{let e=K;return"all"!==G&&(e=e.filter(e=>e.vehicleId===G)),"all"!==H&&(e=e.filter(e=>e.status===H)),"all"!==Q&&(e=e.filter(e=>e.priority===Q)),Y&&(e=e.filter(e=>{const s=te(e.vehicleId),r=s?`${s.gkNumber} ${s.make} ${s.model}`:"";return e.workDescription.toLowerCase().includes(Y.toLowerCase())||e.serviceProvider.toLowerCase().includes(Y.toLowerCase())||r.toLowerCase().includes(Y.toLowerCase())||e.partsReplaced.some(e=>e.toLowerCase().includes(Y.toLowerCase()))||e.notes.toLowerCase().includes(Y.toLowerCase())})),e.sort((e,s)=>new Date(s.date).getTime()-new Date(e.date).getTime())},ie=e=>{switch(e){case"scheduled":return"bg-blue-500";case"in-progress":return"bg-yellow-500";case"completed":return"bg-green-500";case"cancelled":return"bg-red-500";default:return"bg-gray-500"}},ne=e=>{switch(e){case"low":return"bg-green-500";case"medium":return"bg-yellow-500";case"high":return"bg-orange-500";case"critical":return"bg-red-500";default:return"bg-gray-500"}},ce=()=>{const e=new Date,s=new Date;return s.setDate(e.getDate()+30),K.filter(r=>r.nextServiceDate&&new Date(r.nextServiceDate)<=s&&new Date(r.nextServiceDate)>=e)},de=e.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const e={..._,partsReplaced:_.partsReplaced.split(",").map(e=>e.trim()).filter(e=>e)};await r.createMaintenanceRecord(e),B(!1),ae(),se()}catch(s){console.error("Error creating maintenance record:",s)}},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"vehicleId",className:"text-gray-700 font-medium",children:"Vehicle*"}),e.jsxs(j,{value:_.vehicleId,onValueChange:e=>ee({..._,vehicleId:e}),children:[e.jsx(v,{className:"mt-1 border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:e.jsx(b,{placeholder:"Select a vehicle"})}),e.jsx(f,{children:U.map(s=>e.jsxs(N,{value:s.id,children:[s.gkNumber," - ",s.make," ",s.model]},s.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"maintenanceType",children:"Maintenance Type*"}),e.jsxs(j,{value:_.maintenanceType,onValueChange:e=>ee({..._,maintenanceType:e}),children:[e.jsx(v,{children:e.jsx(b,{})}),e.jsxs(f,{children:[e.jsx(N,{value:"routine",children:"Routine Maintenance"}),e.jsx(N,{value:"repair",children:"Repair"}),e.jsx(N,{value:"emergency",children:"Emergency"}),e.jsx(N,{value:"inspection",children:"Inspection"})]})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"priority",children:"Priority*"}),e.jsxs(j,{value:_.priority,onValueChange:e=>ee({..._,priority:e}),children:[e.jsx(v,{children:e.jsx(b,{})}),e.jsxs(f,{children:[e.jsx(N,{value:"low",children:"Low"}),e.jsx(N,{value:"medium",children:"Medium"}),e.jsx(N,{value:"high",children:"High"}),e.jsx(N,{value:"critical",children:"Critical"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"serviceProvider",children:"Service Provider*"}),e.jsx(t,{id:"serviceProvider",value:_.serviceProvider,onChange:e=>ee({..._,serviceProvider:e.target.value}),placeholder:"Toyota Service Center",required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"workDescription",children:"Work Description*"}),e.jsx(x,{id:"workDescription",value:_.workDescription,onChange:e=>ee({..._,workDescription:e.target.value}),placeholder:"Describe the maintenance work to be performed...",required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"partsReplaced",children:"Parts Replaced (comma-separated)"}),e.jsx(t,{id:"partsReplaced",value:_.partsReplaced,onChange:e=>ee({..._,partsReplaced:e.target.value}),placeholder:"Oil filter, brake pads, air filter"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"laborCost",children:"Labor Cost (KES)*"}),e.jsx(t,{id:"laborCost",type:"number",step:"0.01",value:_.laborCost,onChange:e=>ee({..._,laborCost:parseFloat(e.target.value)||0}),placeholder:"5000.00",required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"partsCost",children:"Parts Cost (KES)*"}),e.jsx(t,{id:"partsCost",type:"number",step:"0.01",value:_.partsCost,onChange:e=>ee({..._,partsCost:parseFloat(e.target.value)||0}),placeholder:"15000.00",required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"cost",children:"Total Cost (KES)"}),e.jsx(t,{id:"cost",type:"number",step:"0.01",value:_.cost,onChange:e=>ee({..._,cost:parseFloat(e.target.value)||0}),placeholder:"20000.00",readOnly:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"mileage",children:"Current Mileage (km)*"}),e.jsx(t,{id:"mileage",type:"number",value:_.mileage,onChange:e=>ee({..._,mileage:parseInt(e.target.value)||0}),placeholder:"45000",required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"date",children:"Service Date*"}),e.jsx(t,{id:"date",type:"date",value:_.date,onChange:e=>ee({..._,date:e.target.value}),required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"nextServiceDate",children:"Next Service Date"}),e.jsx(t,{id:"nextServiceDate",type:"date",value:_.nextServiceDate,onChange:e=>ee({..._,nextServiceDate:e.target.value})})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"nextServiceMileage",children:"Next Service Mileage (km)"}),e.jsx(t,{id:"nextServiceMileage",type:"number",value:_.nextServiceMileage,onChange:e=>ee({..._,nextServiceMileage:parseInt(e.target.value)||0}),placeholder:"50000"})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"status",children:"Status*"}),e.jsxs(j,{value:_.status,onValueChange:e=>ee({..._,status:e}),children:[e.jsx(v,{children:e.jsx(b,{})}),e.jsxs(f,{children:[e.jsx(N,{value:"scheduled",children:"Scheduled"}),e.jsx(N,{value:"in-progress",children:"In Progress"}),e.jsx(N,{value:"completed",children:"Completed"}),e.jsx(N,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"warrantyInfo",children:"Warranty Information"}),e.jsx(t,{id:"warrantyInfo",value:_.warrantyInfo,onChange:e=>ee({..._,warrantyInfo:e.target.value}),placeholder:"6 months or 10,000 km"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"notes",children:"Notes"}),e.jsx(x,{id:"notes",value:_.notes,onChange:e=>ee({..._,notes:e.target.value}),placeholder:"Additional information about the maintenance..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200",children:[e.jsx(l,{type:"button",variant:"outline",onClick:()=>{B(!1),ae()},className:"hover:bg-gray-100 transition-colors",children:"Cancel"}),e.jsx(l,{type:"submit",className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 shadow-lg hover:shadow-xl transition-all duration-200",children:"Add Maintenance Record"})]})]});return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50 p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 p-3 rounded-xl",children:e.jsx(y,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Maintenance Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track and manage your fleet maintenance operations"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(l,{variant:"outline",onClick:()=>{const e=[["Date","Vehicle","Type","Provider","Description","Cost","Status","Priority"].join(","),...le().map(e=>{const s=te(e.vehicleId),r=s?`${s.gkNumber} - ${s.make} ${s.model}`:e.vehicleId;return[e.date,r,e.maintenanceType,e.serviceProvider,`"${e.workDescription}"`,e.cost,e.status,e.priority].join(",")})].join("\n"),s=new Blob([e],{type:"text/csv"}),r=window.URL.createObjectURL(s),a=document.createElement("a");a.href=r,a.download=`maintenance-records-${(new Date).toISOString().split("T")[0]}.csv`,a.click(),window.URL.revokeObjectURL(r)},className:"flex items-center gap-2 hover:bg-green-50 hover:border-green-300 hover:text-green-700 transition-all duration-200",children:[e.jsx(w,{className:"h-4 w-4"}),"Export CSV"]}),e.jsxs(m,{open:z,onOpenChange:B,children:[e.jsx(h,{asChild:!0,children:e.jsxs(l,{className:"flex items-center gap-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(C,{className:"h-4 w-4"}),"Add Maintenance Record"]})}),e.jsxs(g,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx(p,{children:e.jsx(u,{className:"text-2xl font-bold text-gray-900",children:"Add Maintenance Record"})}),de]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:(()=>{const s=(()=>{const e=K.length,s=K.filter(e=>"completed"===e.status).length,r=K.filter(e=>"in-progress"===e.status).length,a=K.filter(e=>"completed"===e.status).reduce((e,s)=>e+s.cost,0);return{totalRecords:e,completedRecords:s,inProgressRecords:r,totalCost:a,averageCost:s>0?a/s:0}})();return e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"hover:shadow-lg transition-all duration-300 border-l-4 border-l-blue-500 bg-gradient-to-br from-blue-50 to-white",children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Records"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s.totalRecords}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"All maintenance entries"})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:e.jsx(S,{className:"h-8 w-8 text-blue-600"})})]})})}),e.jsx(i,{className:"hover:shadow-lg transition-all duration-300 border-l-4 border-l-green-500 bg-gradient-to-br from-green-50 to-white",children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Completed"}),e.jsx("p",{className:"text-3xl font-bold text-green-700",children:s.completedRecords}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Finished services"})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx(D,{className:"h-8 w-8 text-green-600"})})]})})}),e.jsx(i,{className:"hover:shadow-lg transition-all duration-300 border-l-4 border-l-amber-500 bg-gradient-to-br from-amber-50 to-white",children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"In Progress"}),e.jsx("p",{className:"text-3xl font-bold text-amber-700",children:s.inProgressRecords}),e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Active maintenance"})]}),e.jsx("div",{className:"bg-amber-100 p-3 rounded-full",children:e.jsx(y,{className:"h-8 w-8 text-amber-600"})})]})})}),e.jsx(i,{className:"hover:shadow-lg transition-all duration-300 border-l-4 border-l-purple-500 bg-gradient-to-br from-purple-50 to-white",children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Cost"}),e.jsxs("p",{className:"text-3xl font-bold text-purple-700",children:["KES ",s.totalCost.toLocaleString()]}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Total expenses"})]}),e.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:e.jsx(k,{className:"h-8 w-8 text-purple-600"})})]})})})]})})()}),e.jsx(i,{className:"shadow-sm border-0 bg-gradient-to-r from-gray-50 to-white",children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"relative md:col-span-2",children:[e.jsx(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(t,{placeholder:"Search maintenance records...",value:Y,onChange:e=>J(e.target.value),className:"pl-10 border-gray-200 focus:border-blue-400 focus:ring-blue-400 transition-colors"})]}),e.jsxs(j,{value:G,onValueChange:W,children:[e.jsx(v,{className:"border-gray-200 focus:border-blue-400 focus:ring-blue-400 transition-colors",children:e.jsx(b,{placeholder:"All Vehicles"})}),e.jsxs(f,{children:[e.jsx(N,{value:"all",children:"All Vehicles"}),U.map(s=>e.jsxs(N,{value:s.id,children:[s.gkNumber," - ",s.make," ",s.model]},s.id))]})]}),e.jsxs(j,{value:H,onValueChange:X,children:[e.jsx(v,{className:"border-gray-200 focus:border-blue-400 focus:ring-blue-400 transition-colors",children:e.jsx(b,{placeholder:"All Status"})}),e.jsxs(f,{children:[e.jsx(N,{value:"all",children:"All Status"}),e.jsx(N,{value:"scheduled",children:"Scheduled"}),e.jsx(N,{value:"in-progress",children:"In Progress"}),e.jsx(N,{value:"completed",children:"Completed"}),e.jsx(N,{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs(j,{value:Q,onValueChange:Z,children:[e.jsx(v,{className:"border-gray-200 focus:border-blue-400 focus:ring-blue-400 transition-colors",children:e.jsx(b,{placeholder:"All Priorities"})}),e.jsxs(f,{children:[e.jsx(N,{value:"all",children:"All Priorities"}),e.jsx(N,{value:"low",children:"Low"}),e.jsx(N,{value:"medium",children:"Medium"}),e.jsx(N,{value:"high",children:"High"}),e.jsx(N,{value:"critical",children:"Critical"})]})]}),e.jsx(l,{variant:"outline",onClick:()=>{J(""),W("all"),X("all"),Z("all")},className:"hover:bg-gray-100 transition-colors",children:"Clear Filters"})]})})}),ce().length>0&&e.jsxs(i,{className:"border-2 border-orange-200 bg-gradient-to-r from-orange-50 via-amber-50 to-orange-50 shadow-md",children:[e.jsx(c,{className:"pb-3",children:e.jsxs(d,{className:"text-orange-800 flex items-center gap-3",children:[e.jsx("div",{className:"bg-orange-100 p-2 rounded-full",children:e.jsx(I,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-lg font-bold",children:"Upcoming Maintenance"}),e.jsxs("p",{className:"text-sm text-orange-700 font-normal mt-1",children:[ce().length," vehicle(s) require maintenance within 30 days"]})]})]})}),e.jsx(n,{children:e.jsx("div",{className:"space-y-3",children:ce().map(s=>{const r=te(s.vehicleId);return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg shadow-sm border border-orange-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-orange-100 p-2 rounded-full",children:e.jsx(L,{className:"h-4 w-4 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-orange-900",children:r?`${r.gkNumber} - ${r.make} ${r.model}`:s.vehicleId}),e.jsx("p",{className:"text-sm text-orange-700",children:s.workDescription})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-sm font-medium text-orange-800",children:["Due: ",new Date(s.nextServiceDate).toLocaleDateString()]}),e.jsxs("p",{className:"text-xs text-orange-600",children:[Math.ceil((new Date(s.nextServiceDate).getTime()-(new Date).getTime())/864e5)," days remaining"]})]})]},s.id)})})})]}),e.jsxs(i,{className:"shadow-lg border-0",children:[e.jsx(c,{className:"border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white",children:e.jsxs(d,{className:"flex items-center gap-3 text-gray-800",children:[e.jsx("div",{className:"bg-gray-100 p-2 rounded-full",children:e.jsx(y,{className:"h-5 w-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xl font-bold",children:"Maintenance Records"}),e.jsxs("p",{className:"text-sm text-gray-600 font-normal mt-1",children:[le().length," record(s) found"]})]})]})}),e.jsx(n,{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:0===le().length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"bg-gray-100 p-4 rounded-full w-24 h-24 mx-auto mb-4 flex items-center justify-center",children:e.jsx(y,{className:"h-12 w-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No maintenance records found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Get started by adding your first maintenance record."}),e.jsxs(l,{onClick:()=>B(!0),className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-8 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx(C,{className:"h-5 w-5 mr-2"}),"Add First Record"]})]}):le().map(s=>{const r=U.find(e=>e.id===s.vehicleId),a=s.nextServiceDate&&new Date(s.nextServiceDate)<new Date;return e.jsxs("div",{className:"p-6 rounded-xl border transition-all duration-200 hover:shadow-md "+(a?"border-red-200 bg-gradient-to-r from-red-50 to-white":"border-gray-200 bg-gradient-to-r from-white to-gray-50"),children:[e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 rounded-full "+("completed"===s.status?"bg-green-100":"in-progress"===s.status?"bg-yellow-100":"bg-red-100"),children:e.jsx(y,{className:"h-6 w-6 "+("completed"===s.status?"text-green-600":"in-progress"===s.status?"text-yellow-600":"text-red-600")})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:s.workDescription}),e.jsx(o,{variant:"completed"===s.status?"default":"in-progress"===s.status?"secondary":"destructive",children:s.status.replace("-"," ")}),a&&e.jsx(o,{variant:"destructive",className:"bg-red-100 text-red-800 border-red-200",children:"Overdue"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 font-medium",children:"Vehicle"}),e.jsx("p",{className:"text-gray-900 font-semibold",children:r?.gkNumber||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 font-medium",children:"Type"}),e.jsx("p",{className:"text-gray-900 capitalize",children:s.maintenanceType})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 font-medium",children:"Cost"}),e.jsxs("p",{className:"text-gray-900 font-semibold",children:["KES ",s.cost.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 font-medium",children:"Service Date"}),e.jsx("p",{className:"text-gray-900",children:new Date(s.date).toLocaleDateString()})]})]})]})]})})}),(s.partsReplaced?.length>0||s.nextServiceDate)&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[s.partsReplaced?.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase tracking-wide mb-2",children:"Parts Replaced"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.partsReplaced.map((s,r)=>e.jsx(o,{variant:"outline",className:"text-xs",children:s},r))})]}),s.nextServiceDate&&e.jsx("div",{children:e.jsxs("p",{className:"text-sm flex items-center gap-2 "+(a?"text-red-600 font-medium":"text-gray-600"),children:[e.jsx(M,{className:"h-4 w-4"}),"Next service due: ",new Date(s.nextServiceDate).toLocaleDateString(),s.nextServiceMileage&&` at ${s.nextServiceMileage.toLocaleString()} km`]})})]}),s.notes&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase tracking-wide mb-2",children:"Notes"}),e.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg",children:s.notes})]})]},s.id)})})})]}),e.jsxs(i,{className:"shadow-lg border-0 bg-gradient-to-br from-white to-gray-50",children:[e.jsx(c,{className:"border-b border-gray-100 bg-gradient-to-r from-blue-50 to-indigo-50",children:e.jsxs(d,{className:"flex items-center gap-3 text-gray-800",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:e.jsx(k,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xl font-bold",children:"Maintenance Costs by Vehicle"}),e.jsx("p",{className:"text-sm text-gray-600 font-normal mt-1",children:"Total maintenance expenses across your fleet"})]})]})}),e.jsx(n,{className:"p-6",children:e.jsx(T,{width:"100%",height:350,children:e.jsxs(F,{data:(()=>{const e={};return K.forEach(s=>{"completed"===s.status&&(e[s.vehicleId]=(e[s.vehicleId]||0)+s.cost)}),Object.entries(e).map(([e,s])=>{const r=te(e);return{vehicle:r?`${r.gkNumber}`:e,cost:s}})})(),margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(P,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx($,{dataKey:"vehicle",stroke:"#6b7280",fontSize:12,tick:{fill:"#6b7280"}}),e.jsx(E,{stroke:"#6b7280",fontSize:12,tick:{fill:"#6b7280"},tickFormatter:e=>`KES ${(e/1e3).toFixed(0)}K`}),e.jsx(V,{formatter:e=>[`KES ${e.toLocaleString()}`,"Cost"],contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),e.jsx(A,{dataKey:"cost",fill:"url(#colorGradient)",radius:[4,4,0,0]}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:1}),e.jsx("stop",{offset:"100%",stopColor:"#1d4ed8",stopOpacity:.8})]})})]})})})]}),e.jsxs(i,{className:"shadow-lg border-0",children:[e.jsx(c,{className:"border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white",children:e.jsxs(d,{className:"flex items-center gap-3 text-gray-800",children:[e.jsx("div",{className:"bg-gray-100 p-2 rounded-full",children:e.jsx(y,{className:"h-5 w-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xl font-bold",children:"Maintenance Records"}),e.jsxs("p",{className:"text-sm text-gray-600 font-normal mt-1",children:[le().length," record(s) found"]})]})]})}),e.jsx(n,{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:0===le().length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"bg-gray-100 p-4 rounded-full w-24 h-24 mx-auto mb-4 flex items-center justify-center",children:e.jsx(y,{className:"h-12 w-12 text-gray-400"})}),e.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"No maintenance records found"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Try adjusting your filters or search terms"})]}):le().map(s=>{const r=te(s.vehicleId),a=(e=>{switch(e){case"routine":return D;case"repair":default:return y;case"emergency":return I;case"inspection":return M}})(s.maintenanceType);return e.jsxs("div",{className:"p-6 border border-gray-200 rounded-xl hover:shadow-lg transition-all duration-300 bg-gradient-to-r from-white to-gray-50 hover:from-blue-50 hover:to-white",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(a,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-900",children:r?`${r.gkNumber} - ${r.make} ${r.model}`:s.vehicleId}),e.jsxs("p",{className:"text-sm text-gray-600 capitalize flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"font-medium",children:s.maintenanceType}),e.jsx("span",{className:"text-gray-400",children:"â€¢"}),e.jsx("span",{children:s.serviceProvider})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{className:`${ne(s.priority)} text-white px-3 py-1 text-xs font-medium`,children:s.priority.toUpperCase()}),e.jsx(o,{className:`${ie(s.status)} text-white px-3 py-1 text-xs font-medium`,children:s.status.replace("-"," ").toUpperCase()})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-100",children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase tracking-wide mb-1",children:"Work Description"}),e.jsx("p",{className:"font-medium text-sm text-gray-900",children:s.workDescription})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-100",children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase tracking-wide mb-1",children:"Cost"}),e.jsxs("p",{className:"font-bold text-lg flex items-center gap-1 text-green-700",children:[e.jsx(k,{className:"h-4 w-4"}),"KES ",s.cost.toLocaleString()]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-100",children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase tracking-wide mb-1",children:"Mileage"}),e.jsxs("p",{className:"font-medium text-lg text-gray-900",children:[s.mileage.toLocaleString()," km"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-100",children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase tracking-wide mb-1",children:"Date"}),e.jsxs("p",{className:"font-medium text-sm flex items-center gap-1 text-gray-900",children:[e.jsx(M,{className:"h-4 w-4 text-blue-500"}),new Date(s.date).toLocaleDateString()]})]})]}),s.partsReplaced&&s.partsReplaced.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase tracking-wide mb-2",children:"Parts Replaced"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.partsReplaced.map((s,r)=>e.jsx(o,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800 hover:bg-blue-200 transition-colors",children:s},r))})]}),s.nextServiceDate&&e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm font-medium text-blue-800 flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4"}),"Next service due: ",new Date(s.nextServiceDate).toLocaleDateString(),s.nextServiceMileage&&` at ${s.nextServiceMileage.toLocaleString()} km`]})})}),s.notes&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase tracking-wide mb-2",children:"Notes"}),e.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg",children:s.notes})]})]},s.id)})})})]})]})}export{K as MaintenanceManagement};
