import{j as e,P as s,a,m as r,n as t}from"./ui-1c32109a.js";import{r as l}from"./vendor-4f48b5c9.js";import{L as i,I as n,B as d,C as c,a as o,b as m,c as h,d as x}from"./index-6a75618c.js";import{T as u,D as g,a as p,b as j,c as b,d as v,e as N}from"./textarea-cf89bf64.js";import{S as y,a as f,b as w,c as C,d as k}from"./select-955880ab.js";import{a as q}from"./apiService-13b4bb2c.js";function F(){return e.jsx(D,{})}const D=l.memo(function(){const[F,D]=l.useState([]),[S,V]=l.useState(!0),[T,A]=l.useState(!1),[L,E]=l.useState(!1),[U,_]=l.useState(null),[Y,I]=l.useState(""),[M,R]=l.useState("all"),[G,H]=l.useState({gkNumber:"",make:"",model:"",year:(new Date).getFullYear(),engineNumber:"",chassisNumber:"",acquisitionDate:"",status:"active",department:"",location:"",color:"",fuelType:"petrol",seatingCapacity:5,equipment:"",notes:""});l.useEffect(()=>{K()},[]);const K=async()=>{V(!0);try{const e=await q.getVehicles();D(e||[])}catch(e){D([])}finally{V(!1)}},z=()=>{H({gkNumber:"",make:"",model:"",year:(new Date).getFullYear(),engineNumber:"",chassisNumber:"",acquisitionDate:"",status:"active",department:"",location:"",color:"",fuelType:"petrol",seatingCapacity:5,equipment:"",notes:""})},O=F.filter(e=>{const s=e.registration||e.gkNumber||"",a=e.make||"",r=e.model||"",t=e.status||"";return(s.toLowerCase().includes(Y.toLowerCase())||a.toLowerCase().includes(Y.toLowerCase())||r.toLowerCase().includes(Y.toLowerCase()))&&("all"===M||t===M)}),P=e=>{switch(e){case"active":return"bg-green-500";case"maintenance":return"bg-yellow-500";case"inactive":default:return"bg-gray-500";case"retired":return"bg-red-500"}},B=e.jsxs("form",{onSubmit:U?async e=>{if(e.preventDefault(),U)try{E(!1),_(null),z(),await K()}catch(s){E(!1),_(null),z(),await K()}}:async e=>{e.preventDefault();try{const e={...G,equipment:G.equipment.split(",").map(e=>e.trim()).filter(e=>e)};await q.createVehicle(e),A(!1),z(),await K()}catch(s){A(!1),z(),await K()}},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"gkNumber",children:"GK Number*"}),e.jsx(n,{id:"gkNumber",value:G.gkNumber,onChange:e=>H({...G,gkNumber:e.target.value}),placeholder:"GK001",required:!0})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"make",children:"Make*"}),e.jsx(n,{id:"make",value:G.make,onChange:e=>H({...G,make:e.target.value}),placeholder:"Toyota",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"model",children:"Model*"}),e.jsx(n,{id:"model",value:G.model,onChange:e=>H({...G,model:e.target.value}),placeholder:"Hilux",required:!0})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"year",children:"Year*"}),e.jsx(n,{id:"year",type:"number",value:G.year,onChange:e=>H({...G,year:parseInt(e.target.value)}),min:"1990",max:(new Date).getFullYear()+1,required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"engineNumber",children:"Engine Number*"}),e.jsx(n,{id:"engineNumber",value:G.engineNumber,onChange:e=>H({...G,engineNumber:e.target.value}),placeholder:"ENG123456",required:!0})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"chassisNumber",children:"Chassis Number*"}),e.jsx(n,{id:"chassisNumber",value:G.chassisNumber,onChange:e=>H({...G,chassisNumber:e.target.value}),placeholder:"CHS789012",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"acquisitionDate",children:"Acquisition Date*"}),e.jsx(n,{id:"acquisitionDate",type:"date",value:G.acquisitionDate,onChange:e=>H({...G,acquisitionDate:e.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"status",children:"Status*"}),e.jsxs(y,{value:G.status,onValueChange:e=>H({...G,status:e}),children:[e.jsx(f,{children:e.jsx(w,{})}),e.jsxs(C,{children:[e.jsx(k,{value:"active",children:"Active"}),e.jsx(k,{value:"maintenance",children:"Maintenance"}),e.jsx(k,{value:"inactive",children:"Inactive"}),e.jsx(k,{value:"retired",children:"Retired"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"department",children:"Department*"}),e.jsx(n,{id:"department",value:G.department,onChange:e=>H({...G,department:e.target.value}),placeholder:"State Department for Energy",required:!0})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"location",children:"Current Location*"}),e.jsx(n,{id:"location",value:G.location,onChange:e=>H({...G,location:e.target.value}),placeholder:"Nairobi HQ",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"color",children:"Color"}),e.jsx(n,{id:"color",value:G.color,onChange:e=>H({...G,color:e.target.value}),placeholder:"White"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"fuelType",children:"Fuel Type*"}),e.jsxs(y,{value:G.fuelType,onValueChange:e=>H({...G,fuelType:e}),children:[e.jsx(f,{children:e.jsx(w,{})}),e.jsxs(C,{children:[e.jsx(k,{value:"petrol",children:"Petrol"}),e.jsx(k,{value:"diesel",children:"Diesel"}),e.jsx(k,{value:"electric",children:"Electric"}),e.jsx(k,{value:"hybrid",children:"Hybrid"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"seatingCapacity",children:"Seating Capacity"}),e.jsx(n,{id:"seatingCapacity",type:"number",value:G.seatingCapacity,onChange:e=>H({...G,seatingCapacity:parseInt(e.target.value)}),min:"1",max:"50"})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"equipment",children:"Equipment (comma-separated)"}),e.jsx(n,{id:"equipment",value:G.equipment,onChange:e=>H({...G,equipment:e.target.value}),placeholder:"Fire extinguisher, First aid kit, Toolkit"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"notes",children:"Notes"}),e.jsx(u,{id:"notes",value:G.notes,onChange:e=>H({...G,notes:e.target.value}),placeholder:"Additional information about the vehicle..."})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>{A(!1),E(!1),z()},children:"Cancel"}),e.jsx(d,{type:"submit",children:U?"Update Vehicle":"Add Vehicle"})]})]});return S?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{children:"Vehicle Registry"}),e.jsxs(d,{disabled:!0,className:"flex items-center gap-2",children:[e.jsx(s,{className:"h-4 w-4"}),"Add Vehicle"]})]}),e.jsx(c,{children:e.jsxs(o,{className:"py-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading vehicles..."})]})})]}):e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 p-6 rounded-xl border border-blue-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-600 rounded-xl shadow-lg",children:e.jsx(a,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Vehicle Registry"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage and track your fleet vehicles"})]})]}),e.jsxs(g,{open:T,onOpenChange:A,children:[e.jsx(p,{asChild:!0,children:e.jsxs(d,{className:"flex items-center gap-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6 py-3 rounded-lg shadow-lg transition-all duration-200",children:[e.jsx(s,{className:"h-5 w-5"}),"Add Vehicle"]})}),e.jsxs(j,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(b,{children:[e.jsx(v,{className:"text-2xl font-bold text-gray-800",children:"Add New Vehicle"}),e.jsx(N,{className:"text-gray-600",children:"Register a new vehicle in the fleet management system with all required details and specifications."})]}),B]})]})]}),e.jsxs(c,{className:"bg-white shadow-xl border border-gray-200",children:[e.jsx(m,{className:"bg-gradient-to-r from-gray-50 to-blue-50 border-b",children:e.jsxs(h,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-600 rounded-lg",children:e.jsx(r,{className:"h-5 w-5 text-white"})}),"Search & Filter"]})}),e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(r,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(n,{placeholder:"Search vehicles by GK number, make, or model...",value:Y,onChange:e=>I(e.target.value),className:"pl-10 border-2 border-gray-200 focus:border-blue-400 transition-colors"})]}),e.jsxs(y,{value:M,onValueChange:R,children:[e.jsx(f,{className:"w-48 border-2 border-gray-200 focus:border-blue-400",children:e.jsx(w,{})}),e.jsxs(C,{children:[e.jsx(k,{value:"all",children:"All Status"}),e.jsx(k,{value:"active",children:"Active"}),e.jsx(k,{value:"maintenance",children:"Maintenance"}),e.jsx(k,{value:"inactive",children:"Inactive"}),e.jsx(k,{value:"retired",children:"Retired"})]})]})]})})]}),e.jsx("div",{className:"grid gap-6",children:0===O.length?e.jsx(c,{className:"bg-gradient-to-br from-gray-50 to-blue-50 border-2 border-gray-200 shadow-xl",children:e.jsxs(o,{className:"py-12 text-center",children:[e.jsx("div",{className:"p-4 bg-gray-100 rounded-full w-fit mx-auto mb-4",children:e.jsx(a,{className:"h-16 w-16 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Vehicles Found"}),e.jsx("p",{className:"text-gray-600",children:"Add your first vehicle to get started with fleet management."})]})}):O.map(s=>e.jsxs(c,{className:"bg-white shadow-xl border border-gray-200 hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1",children:[e.jsx(m,{className:"bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 border-b pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-600 rounded-xl shadow-lg",children:e.jsx(a,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx(h,{className:"text-xl text-gray-800",children:s.registration||s.gkNumber||"Unknown"}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:[s.make||"Unknown"," ",s.model||"Unknown"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{className:`${P(s.status||"unknown")} text-white px-3 py-1 font-medium shadow-md`,children:s.status||"unknown"}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>(e=>{_(e),H({gkNumber:e.registration||e.gkNumber||"",make:e.make||"",model:e.model||"",year:e.year||(new Date).getFullYear(),engineNumber:e.engine_number||e.engineNumber||"",chassisNumber:e.chassis_number||e.chassisNumber||"",acquisitionDate:e.acquisition_date||e.acquisitionDate||"",status:e.status||"active",department:e.department||"",location:e.location||"",color:e.color||"",fuelType:e.fuel_type||e.fuelType||"petrol",seatingCapacity:e.seating_capacity||e.seatingCapacity||5,equipment:(e.equipment||[]).join(", "),notes:e.notes||""}),E(!0)})(s),className:"p-2 hover:bg-blue-100 rounded-lg transition-colors",children:e.jsx(t,{className:"h-5 w-5 text-blue-600"})})]})]})}),e.jsxs(o,{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-sm font-medium text-blue-600 mb-1",children:"Vehicle Details"}),e.jsxs("p",{className:"font-semibold text-gray-800",children:[s.make||"Unknown"," ",s.model||"Unknown"]}),e.jsxs("p",{className:"text-gray-600 text-sm",children:["Year: ",s.year||"Unknown"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-4 rounded-lg border border-green-200",children:[e.jsx("p",{className:"text-sm font-medium text-green-600 mb-1",children:"Department"}),e.jsx("p",{className:"font-semibold text-gray-800",children:s.department||"Not specified"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 p-4 rounded-lg border border-purple-200",children:[e.jsx("p",{className:"text-sm font-medium text-purple-600 mb-1",children:"Location"}),e.jsx("p",{className:"font-semibold text-gray-800",children:s.location||"Not specified"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-amber-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-600 mb-1",children:"Engine Number"}),e.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:s.engine_number||s.engineNumber||"Not specified"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 p-4 rounded-lg border border-indigo-200",children:[e.jsx("p",{className:"text-sm font-medium text-indigo-600 mb-1",children:"Chassis Number"}),e.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:s.chassis_number||s.chassisNumber||"Not specified"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 p-4 rounded-lg border border-orange-200",children:[e.jsx("p",{className:"text-sm font-medium text-orange-600 mb-1",children:"Fuel Type"}),e.jsx("p",{className:"font-semibold text-gray-800 capitalize",children:s.fuel_type||s.fuelType||"Not specified"})]})]}),s.equipment&&s.equipment.length>0&&e.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-gray-50 to-slate-50 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-3",children:"Equipment"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.equipment.map((s,a)=>e.jsx(x,{variant:"secondary",className:"bg-blue-100 text-blue-800 text-xs px-3 py-1 rounded-full",children:s},a))})]}),s.notes&&e.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-teal-50 to-green-50 rounded-lg border border-teal-200",children:[e.jsx("p",{className:"text-sm font-medium text-teal-600 mb-2",children:"Notes"}),e.jsx("p",{className:"text-sm text-gray-700",children:s.notes})]})]})]},s.id))}),e.jsx(g,{open:L,onOpenChange:E,children:e.jsxs(j,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(b,{children:[e.jsx(v,{className:"text-2xl font-bold text-gray-800",children:"Edit Vehicle"}),e.jsx(N,{className:"text-gray-600",children:"Update vehicle information and modify registration details. Changes will be saved to the fleet registry."})]}),B]})})]})});export{F as VehicleRegistry};
