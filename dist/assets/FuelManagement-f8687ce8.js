import{j as e,P as s,g as t,p as a,q as l,r as c,k as r,s as i,t as n}from"./ui-1c32109a.js";import{r as d}from"./vendor-4f48b5c9.js";import{L as o,I as u,B as h,C as m,a as x,b as j,c as p,T as g,e as v,f as b,g as f,d as N}from"./index-6a75618c.js";import{T as y,D as w,a as C,b as k,c as A,d as F,e as S}from"./textarea-cf89bf64.js";import{S as _,a as L,b as P,c as I,d as D}from"./select-955880ab.js";import{a as T}from"./apiService-13b4bb2c.js";function M(){return e.jsx(K,{})}const K=d.memo(function(){const[M,K]=d.useState([]),[q,B]=d.useState([]),[V,E]=d.useState([]),[R,U]=d.useState(!0),[$,O]=d.useState(!1),[Q,z]=d.useState(!1),[J,W]=d.useState(!1),[Y,G]=d.useState("all"),[H,X]=d.useState("month"),[Z,ee]=d.useState("records"),[se,te]=d.useState(null),[ae,le]=d.useState({vehicleId:"",fuelType:"petrol",fuelAmount:0,costPerLiter:0,totalCost:0,mileage:0,date:"",supplier:"",receiptNumber:"",notes:"",paymentMethod:"cash",bulkAccountId:""}),[ce,re]=d.useState({accountName:"",provider:"",accountNumber:"",creditLimit:0,contactPerson:"",contactPhone:"",contactEmail:"",initialDeposit:0}),[ie,ne]=d.useState({accountId:"",amount:0,description:"",date:""}),de=d.useCallback(async()=>{U(!0);try{const[e,s,t]=await Promise.all([T.getFuelRecords(),T.getVehicles(),T.getBulkAccounts()]);K(e||[]),B(s||[]),E(t||[])}catch(e){K([]),B([]),E([])}finally{U(!1)}},[]);d.useEffect(()=>{de()},[de]),d.useEffect(()=>{ae.fuelAmount&&ae.costPerLiter&&le(e=>({...e,totalCost:e.fuelAmount*e.costPerLiter}))},[ae.fuelAmount,ae.costPerLiter]);const oe=d.useCallback(async e=>{if(e.preventDefault(),ae.vehicleId&&ae.fuelAmount&&ae.costPerLiter&&ae.date){if("bulk-account"===ae.paymentMethod&&ae.bulkAccountId){const e=V.find(e=>e.id===ae.bulkAccountId);if(e&&e.current_balance<ae.totalCost)return void alert("Insufficient bulk account balance. Please deposit funds or use alternative payment method.")}try{const e=q.find(e=>e.id===ae.vehicleId),s={vehicle_id:ae.vehicleId,vehicle_registration:e?.registration||e?.gkNumber||"Unknown",fuel_type:ae.fuelType,quantity:ae.fuelAmount,unit_price:ae.costPerLiter,total_cost:ae.totalCost,odometer_reading:ae.mileage,fuel_station:ae.supplier||"Unknown Station",receipt_number:ae.receiptNumber,date:ae.date,notes:ae.notes,bulk_account_id:"bulk-account"===ae.paymentMethod?ae.bulkAccountId:null},t=await T.createFuelRecord(s);if("bulk-account"===ae.paymentMethod&&ae.bulkAccountId&&t.success){const e=await T.deductFromBulkAccount(ae.bulkAccountId,ae.totalCost);e.success?(te({accountId:ae.bulkAccountId,amount:ae.totalCost}),setTimeout(()=>te(null),5e3),alert(`Fuel record added successfully! Bulk account balance updated: KSh ${e.newBalance.toLocaleString()}`)):alert("Fuel record added successfully! Note: Bulk account balance may not reflect immediately")}else t.success?alert("Fuel record added successfully!"):alert(`Fuel record saved (${t.error||"using fallback"})`);O(!1),me(),await de()}catch(s){alert(`Error creating fuel record: ${s instanceof Error?s.message:"Unknown error"}`)}}else alert("Please fill in all required fields")},[ae,V,q,de]),ue=d.useCallback(async e=>{if(e.preventDefault(),ce.accountName&&ce.provider&&ce.accountNumber)try{const e={account_name:ce.accountName,supplier_name:ce.provider,account_number:ce.accountNumber,contact_person:ce.contactPerson,contact_email:ce.contactEmail,contact_phone:ce.contactPhone,initial_balance:ce.initialDeposit,credit_limit:ce.creditLimit,fuel_types:"petrol,diesel"};await T.createBulkAccount(e),z(!1),xe(),await de()}catch(s){z(!1),xe(),await de()}else alert("Please fill in all required fields")},[ce,de]),he=d.useCallback(async e=>{e.preventDefault();try{if(V.find(e=>e.id===ie.accountId)){const e=V.map(e=>e.id===ie.accountId?{...e,current_balance:e.current_balance+ie.amount,updated_at:(new Date).toISOString()}:e);E(e)}W(!1),je()}catch(s){W(!1),je()}},[ie,V]),me=d.useCallback(()=>{le({vehicleId:"",fuelType:"petrol",fuelAmount:0,costPerLiter:0,totalCost:0,mileage:0,date:"",supplier:"",receiptNumber:"",notes:"",paymentMethod:"cash",bulkAccountId:""})},[]),xe=d.useCallback(()=>{re({accountName:"",provider:"",accountNumber:"",creditLimit:0,contactPerson:"",contactPhone:"",contactEmail:"",initialDeposit:0})},[]),je=d.useCallback(()=>{ne({accountId:"",amount:0,description:"",date:""})},[]),pe=d.useCallback(e=>q.find(s=>s.id===e),[q]),ge=d.useMemo(()=>{let e=M;return"all"!==Y&&(e=e.filter(e=>e.vehicle_id===Y)),e.sort((e,s)=>new Date(s.date).getTime()-new Date(e.date).getTime())},[M,Y]),ve=d.useCallback(()=>ge,[ge]),be=d.useMemo(()=>ge.reduce((e,s)=>e+s.total_cost,0),[ge]),fe=d.useMemo(()=>ge.reduce((e,s)=>e+s.quantity,0),[ge]),Ne=d.useMemo(()=>V.reduce((e,s)=>e+s.current_balance,0),[V]),ye=d.useCallback(()=>be,[be]),we=d.useCallback(()=>fe,[fe]),Ce=d.useCallback(()=>Ne,[Ne]),ke=e=>{switch(e.toLowerCase()){case"active":return"bg-green-500";case"suspended":return"bg-red-500";case"expired":return"bg-gray-500";default:return"bg-blue-500"}},Ae=e.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"vehicleId",children:"Vehicle*"}),e.jsxs(_,{value:ae.vehicleId,onValueChange:e=>le({...ae,vehicleId:e}),children:[e.jsx(L,{children:e.jsx(P,{placeholder:"Select a vehicle"})}),e.jsx(I,{children:q.map(s=>e.jsxs(D,{value:s.id,children:[s.registration||s.gkNumber||"Unknown"," - ",s.make," ",s.model]},s.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"fuelType",children:"Fuel Type*"}),e.jsxs(_,{value:ae.fuelType,onValueChange:e=>le({...ae,fuelType:e}),children:[e.jsx(L,{children:e.jsx(P,{})}),e.jsxs(I,{children:[e.jsx(D,{value:"petrol",children:"Petrol"}),e.jsx(D,{value:"diesel",children:"Diesel"}),e.jsx(D,{value:"electric",children:"Electric"})]})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"fuelAmount",children:"Fuel Amount (L)*"}),e.jsx(u,{id:"fuelAmount",type:"number",step:"0.01",value:ae.fuelAmount,onChange:e=>le({...ae,fuelAmount:parseFloat(e.target.value)||0}),required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"costPerLiter",children:"Cost per Liter (KSh)*"}),e.jsx(u,{id:"costPerLiter",type:"number",step:"0.01",value:ae.costPerLiter,onChange:e=>le({...ae,costPerLiter:parseFloat(e.target.value)||0}),required:!0})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"totalCost",children:"Total Cost (KSh)"}),e.jsx(u,{id:"totalCost",type:"number",step:"0.01",value:ae.totalCost,onChange:e=>le({...ae,totalCost:parseFloat(e.target.value)||0}),disabled:!0})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"mileage",children:"Odometer Reading"}),e.jsx(u,{id:"mileage",type:"number",value:ae.mileage,onChange:e=>le({...ae,mileage:parseInt(e.target.value)||0})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"date",children:"Date*"}),e.jsx(u,{id:"date",type:"date",value:ae.date,onChange:e=>le({...ae,date:e.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"supplier",children:"Fuel Station"}),e.jsx(u,{id:"supplier",value:ae.supplier,onChange:e=>le({...ae,supplier:e.target.value}),placeholder:"Shell, Total, etc."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"paymentMethod",children:"Payment Method*"}),e.jsxs(_,{value:ae.paymentMethod,onValueChange:e=>le({...ae,paymentMethod:e}),children:[e.jsx(L,{children:e.jsx(P,{})}),e.jsxs(I,{children:[e.jsx(D,{value:"cash",children:"Cash"}),e.jsx(D,{value:"bulk-account",children:"Bulk Account"}),e.jsx(D,{value:"credit",children:"Credit"})]})]})]}),"bulk-account"===ae.paymentMethod&&e.jsxs("div",{children:[e.jsx(o,{htmlFor:"bulkAccountId",children:"Bulk Account"}),e.jsxs(_,{value:ae.bulkAccountId,onValueChange:e=>le({...ae,bulkAccountId:e}),children:[e.jsx(L,{children:e.jsx(P,{placeholder:"Select account"})}),e.jsx(I,{children:V.filter(e=>"active"===e.status).map(s=>e.jsxs(D,{value:s.id,children:[s.account_name," (KSh ",s.current_balance.toLocaleString(),")"]},s.id))})]})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"receiptNumber",children:"Receipt Number"}),e.jsx(u,{id:"receiptNumber",value:ae.receiptNumber,onChange:e=>le({...ae,receiptNumber:e.target.value}),placeholder:"Receipt or transaction number"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"notes",children:"Notes"}),e.jsx(y,{id:"notes",value:ae.notes,onChange:e=>le({...ae,notes:e.target.value}),placeholder:"Additional notes about the fuel transaction..."})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>{O(!1),me()},children:"Cancel"}),e.jsx(h,{type:"submit",children:"Add Fuel Record"})]})]}),Fe=e.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"accountName",children:"Account Name*"}),e.jsx(u,{id:"accountName",value:ce.accountName,onChange:e=>re({...ce,accountName:e.target.value}),placeholder:"Shell Fleet Card",required:!0})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"provider",children:"Provider*"}),e.jsx(u,{id:"provider",value:ce.provider,onChange:e=>re({...ce,provider:e.target.value}),placeholder:"Shell Kenya",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"accountNumber",children:"Account Number*"}),e.jsx(u,{id:"accountNumber",value:ce.accountNumber,onChange:e=>re({...ce,accountNumber:e.target.value}),placeholder:"ACC-2024-001",required:!0})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"creditLimit",children:"Credit Limit (KSh)"}),e.jsx(u,{id:"creditLimit",type:"number",value:ce.creditLimit,onChange:e=>re({...ce,creditLimit:parseFloat(e.target.value)||0}),placeholder:"1000000"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"contactPerson",children:"Contact Person"}),e.jsx(u,{id:"contactPerson",value:ce.contactPerson,onChange:e=>re({...ce,contactPerson:e.target.value}),placeholder:"John Doe"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"contactPhone",children:"Contact Phone"}),e.jsx(u,{id:"contactPhone",value:ce.contactPhone,onChange:e=>re({...ce,contactPhone:e.target.value}),placeholder:"+254 700 000 000"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"contactEmail",children:"Contact Email"}),e.jsx(u,{id:"contactEmail",type:"email",value:ce.contactEmail,onChange:e=>re({...ce,contactEmail:e.target.value}),placeholder:"contact@shell.co.ke"})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"initialDeposit",children:"Initial Deposit (KSh)"}),e.jsx(u,{id:"initialDeposit",type:"number",value:ce.initialDeposit,onChange:e=>re({...ce,initialDeposit:parseFloat(e.target.value)||0}),placeholder:"500000"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>{z(!1),xe()},children:"Cancel"}),e.jsx(h,{type:"submit",children:"Create Account"})]})]});return R?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{children:"Fuel Management"}),e.jsxs(h,{disabled:!0,className:"flex items-center gap-2",children:[e.jsx(s,{className:"h-4 w-4"}),"Add Fuel Record"]})]}),e.jsx(m,{children:e.jsxs(x,{className:"py-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading fuel data..."})]})})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 rounded-xl p-6 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-bold flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(t,{className:"h-8 w-8"})}),"Fuel Management"]}),e.jsx("p",{className:"text-blue-100 mt-2",children:"Monitor fuel consumption, costs, and efficiency across your fleet"})]}),e.jsxs(w,{open:$,onOpenChange:O,children:[e.jsx(C,{asChild:!0,children:e.jsxs(h,{className:"bg-white text-blue-600 hover:bg-blue-50 shadow-lg border-0 flex items-center gap-2 px-6 py-3",children:[e.jsx(s,{className:"h-5 w-5"}),"Add Fuel Record"]})}),e.jsxs(k,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(A,{children:[e.jsx(F,{className:"text-xl text-gray-800",children:"Add Fuel Record"}),e.jsx(S,{className:"text-gray-600",children:"Record fuel transactions for vehicle fleet management and cost tracking."})]}),Ae]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(m,{className:"bg-gradient-to-br from-emerald-500 to-teal-600 text-white border-0 shadow-xl hover:shadow-2xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx(j,{className:"pb-3",children:e.jsxs(p,{className:"text-sm font-medium text-emerald-100 flex items-center justify-between",children:["Total Fuel Cost",e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(a,{className:"h-5 w-5"})})]})}),e.jsxs(x,{children:[e.jsxs("div",{className:"text-3xl font-bold",children:["KSh ",ye().toLocaleString()]}),e.jsxs("p",{className:"text-emerald-100 mt-2 flex items-center gap-1",children:[e.jsx(l,{className:"h-4 w-4"}),"This period"]})]})]}),e.jsxs(m,{className:"bg-gradient-to-br from-blue-500 to-cyan-600 text-white border-0 shadow-xl hover:shadow-2xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx(j,{className:"pb-3",children:e.jsxs(p,{className:"text-sm font-medium text-blue-100 flex items-center justify-between",children:["Total Fuel Volume",e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(t,{className:"h-5 w-5"})})]})}),e.jsxs(x,{children:[e.jsxs("div",{className:"text-3xl font-bold",children:[we().toFixed(1),"L"]}),e.jsxs("p",{className:"text-blue-100 mt-2 flex items-center gap-1",children:[e.jsx(c,{className:"h-4 w-4"}),"Consumed"]})]})]}),e.jsxs(m,{className:"bg-gradient-to-br from-purple-500 to-pink-600 text-white border-0 shadow-xl hover:shadow-2xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx(j,{className:"pb-3",children:e.jsxs(p,{className:"text-sm font-medium text-purple-100 flex items-center justify-between",children:["Fuel Records",e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(c,{className:"h-5 w-5"})})]})}),e.jsxs(x,{children:[e.jsx("div",{className:"text-3xl font-bold",children:ve().length}),e.jsxs("p",{className:"text-purple-100 mt-2 flex items-center gap-1",children:[e.jsx(r,{className:"h-4 w-4"}),"Transactions"]})]})]}),e.jsxs(m,{className:"bg-gradient-to-br from-amber-500 to-orange-600 text-white border-0 shadow-xl hover:shadow-2xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx(j,{className:"pb-3",children:e.jsxs(p,{className:"text-sm font-medium text-amber-100 flex items-center justify-between",children:["Bulk Account Balance",e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(i,{className:"h-5 w-5"})})]})}),e.jsxs(x,{children:[e.jsxs("div",{className:"text-3xl font-bold",children:["KSh ",Ce().toLocaleString()]}),e.jsxs("p",{className:"text-amber-100 mt-2 flex items-center gap-1",children:[e.jsx(a,{className:"h-4 w-4"}),"Available"]})]})]})]}),e.jsxs(g,{value:Z,onValueChange:e=>ee(e),className:"bg-white rounded-xl shadow-lg border border-gray-200",children:[e.jsxs(v,{className:"grid w-full grid-cols-3 p-1 bg-gray-50 rounded-t-xl",children:[e.jsxs(b,{value:"records",className:"flex items-center gap-2 data-[state=active]:bg-blue-600 data-[state=active]:text-white data-[state=active]:shadow-lg transition-all duration-200",children:[e.jsx(t,{className:"h-4 w-4"}),"Fuel Records"]}),e.jsxs(b,{value:"accounts",className:"flex items-center gap-2 data-[state=active]:bg-blue-600 data-[state=active]:text-white data-[state=active]:shadow-lg transition-all duration-200",children:[e.jsx(i,{className:"h-4 w-4"}),"Bulk Accounts"]}),e.jsxs(b,{value:"analytics",className:"flex items-center gap-2 data-[state=active]:bg-blue-600 data-[state=active]:text-white data-[state=active]:shadow-lg transition-all duration-200",children:[e.jsx(l,{className:"h-4 w-4"}),"Analytics"]})]}),e.jsxs(f,{value:"records",className:"space-y-6 p-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 p-4 rounded-lg border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(n,{className:"h-5 w-5 text-blue-600"}),"Filter & Search"]}),e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsxs(_,{value:Y,onValueChange:G,children:[e.jsx(L,{className:"w-64 bg-white border-gray-300 focus:ring-blue-500 focus:border-blue-500",children:e.jsx(P,{})}),e.jsxs(I,{children:[e.jsx(D,{value:"all",children:"All Vehicles"}),q.map(s=>e.jsxs(D,{value:s.id,children:[s.registration||s.gkNumber||"Unknown"," - ",s.make," ",s.model]},s.id))]})]}),e.jsxs(_,{value:H,onValueChange:X,children:[e.jsx(L,{className:"w-48 bg-white border-gray-300 focus:ring-blue-500 focus:border-blue-500",children:e.jsx(P,{})}),e.jsxs(I,{children:[e.jsx(D,{value:"week",children:"Last Week"}),e.jsx(D,{value:"month",children:"Last Month"}),e.jsx(D,{value:"quarter",children:"Last Quarter"}),e.jsx(D,{value:"year",children:"Last Year"})]})]})]})]}),e.jsx("div",{className:"grid gap-4",children:0===ve().length?e.jsx(m,{children:e.jsxs(x,{className:"py-8 text-center",children:[e.jsx(t,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"No fuel records found. Add your first fuel transaction to get started."})]})}):ve().map(s=>{const t=pe(s.vehicle_id);return e.jsx(m,{children:e.jsxs(x,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:t?`${t.registration||t.gkNumber||"Unknown"} - ${t.make} ${t.model}`:s.vehicle_registration?`${s.vehicle_registration} - Unknown Vehicle`:"Unknown Vehicle"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.fuel_station&&`${s.fuel_station} • `,new Date(s.date).toLocaleDateString()]})]}),e.jsx(N,{variant:"secondary",className:"text-sm",children:s.fuel_type.charAt(0).toUpperCase()+s.fuel_type.slice(1)})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Quantity"}),e.jsxs("p",{className:"font-medium",children:[s.quantity,"L"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Cost per Liter"}),e.jsxs("p",{className:"font-medium",children:["KSh ",s.cost_per_liter]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Cost"}),e.jsxs("p",{className:"font-medium",children:["KSh ",s.total_cost.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Odometer"}),e.jsxs("p",{className:"font-medium",children:[s.odometer_reading||"N/A"," km"]})]})]}),s.notes&&e.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded",children:e.jsx("p",{className:"text-sm text-gray-700",children:s.notes})})]})},s.id)})})]}),e.jsxs(f,{value:"accounts",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Bulk Fuel Accounts"}),e.jsxs(w,{open:Q,onOpenChange:z,children:[e.jsx(C,{asChild:!0,children:e.jsxs(h,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(s,{className:"h-4 w-4"}),"Add Account"]})}),e.jsxs(k,{className:"max-w-2xl",children:[e.jsxs(A,{children:[e.jsx(F,{children:"Create Bulk Fuel Account"}),e.jsx(S,{children:"Set up a prepaid fuel account with a fuel supplier for fleet operations."})]}),Fe]})]})]}),e.jsx("div",{className:"grid gap-4",children:0===V.length?e.jsx(m,{children:e.jsxs(x,{className:"py-8 text-center",children:[e.jsx(i,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"No bulk fuel accounts configured. Create your first account to get started."})]})}):V.map(t=>e.jsxs(m,{children:[e.jsx(j,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(p,{className:"text-lg",children:t.account_name}),e.jsx(N,{className:`${ke(t.status)} text-white`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]})}),e.jsxs(x,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Provider"}),e.jsx("p",{className:"font-medium",children:t.supplier_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Account Number"}),e.jsx("p",{className:"font-medium",children:t.account_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current Balance"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"font-medium text-green-600",children:["KSh ",t.current_balance.toLocaleString()]}),se&&se.accountId===t.id&&e.jsxs("div",{className:"flex items-center gap-1 bg-red-50 text-red-600 px-2 py-1 rounded text-xs",children:[e.jsxs("span",{children:["-KSh ",se.amount.toLocaleString()]}),e.jsx("span",{className:"text-xs",children:"just deducted"})]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Initial Deposit"}),e.jsxs("p",{className:"font-medium",children:["KSh ",t.initial_balance.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Credit Limit"}),e.jsxs("p",{className:"font-medium",children:["KSh ",t.credit_limit.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Contact Person"}),e.jsx("p",{className:"font-medium",children:t.contact_person})]})]}),e.jsx("div",{className:"mt-4 flex gap-2",children:e.jsxs(w,{open:J,onOpenChange:W,children:[e.jsx(C,{asChild:!0,children:e.jsxs(h,{size:"sm",variant:"outline",onClick:()=>ne({...ie,accountId:t.id}),children:[e.jsx(s,{className:"h-3 w-3 mr-1"}),"Add Deposit"]})}),e.jsxs(k,{children:[e.jsxs(A,{children:[e.jsx(F,{children:"Add Deposit"}),e.jsx(S,{children:"Add funds to the bulk fuel account."})]}),e.jsxs("form",{onSubmit:he,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"amount",children:"Deposit Amount (KSh)*"}),e.jsx(u,{id:"amount",type:"number",value:ie.amount,onChange:e=>ne({...ie,amount:parseFloat(e.target.value)||0}),required:!0})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"description",children:"Description"}),e.jsx(u,{id:"description",value:ie.description,onChange:e=>ne({...ie,description:e.target.value}),placeholder:"Monthly fuel deposit"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"date",children:"Date*"}),e.jsx(u,{id:"date",type:"date",value:ie.date,onChange:e=>ne({...ie,date:e.target.value}),required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>W(!1),children:"Cancel"}),e.jsx(h,{type:"submit",children:"Add Deposit"})]})]})]})]})})]})]},t.id))})]}),e.jsx(f,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(m,{children:[e.jsx(j,{children:e.jsx(p,{children:"Fuel Consumption Trend"})}),e.jsx(x,{children:e.jsx("div",{className:"h-64 w-full",children:e.jsx("p",{className:"text-center text-gray-500 mt-20",children:"Analytics data will appear here when fuel records are available."})})})]}),e.jsxs(m,{children:[e.jsx(j,{children:e.jsx(p,{children:"Vehicle Fuel Efficiency"})}),e.jsx(x,{children:e.jsx("div",{className:"h-64 w-full",children:e.jsx("p",{className:"text-center text-gray-500 mt-20",children:"Vehicle efficiency data will be calculated and displayed here."})})})]})]})})]})]})});export{M as FuelManagement};
